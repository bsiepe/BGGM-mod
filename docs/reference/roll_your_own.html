<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Compute Custom Network Statistics — roll_your_own • BGGMmod</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Compute Custom Network Statistics — roll_your_own" />
<meta property="og:description" content="This function allows for computing custom network statistics for
weighted adjacency matrices (partial correlations). The statistics are computed for
each of the sampled matrices, resulting in a distribution." />
<meta property="og:image" content="https://donaldrwilliams.github.io/BGGMmod/reference/figures/hex.jpg" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:creator" content="@wdonald_1985" />
<meta name="twitter:site" content="@wdonald_1985" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BGGMmod</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../articles/installation.html">Troubleshoot</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/donaldRwilliams/BGGMmod/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compute Custom Network Statistics</h1>
    <small class="dont-index">Source: <a href='https://github.com/donaldRwilliams/BGGMmod/blob/master/R/roll_your_own.R'><code>R/roll_your_own.R</code></a></small>
    <div class="hidden name"><code>roll_your_own.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function allows for computing custom network statistics for
weighted adjacency matrices (partial correlations). The statistics are computed for
each of the sampled matrices, resulting in a distribution.</p>
    </div>

    <pre class="usage"><span class='fu'>roll_your_own</span>(
  <span class='no'>object</span>,
  <span class='no'>FUN</span>,
  <span class='kw'>iter</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>select</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>cred</span> <span class='kw'>=</span> <span class='fl'>0.95</span>,
  <span class='kw'>progress</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>An object of class <code>estimate</code>.</p></td>
    </tr>
    <tr>
      <th>FUN</th>
      <td><p>A custom function for computing the statistic. The first argument must be
a partial correlation matrix.</p></td>
    </tr>
    <tr>
      <th>iter</th>
      <td><p>Number of iterations (posterior samples; defaults to the number in the object).</p></td>
    </tr>
    <tr>
      <th>select</th>
      <td><p>Logical. Should the graph be selected ? The default is currently <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>cred</th>
      <td><p>Numeric. Credible interval between 0 and 1  (default is 0.95) that is used for selecting the graph.</p></td>
    </tr>
    <tr>
      <th>progress</th>
      <td><p>Logical. Should a progress bar be included (defaults to <code>TRUE</code>) ?</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed to the function.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object defined by <code>FUN</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The user has complete control of this function. Hence, care must be taken as to what <code>FUN</code>
returns and in what format. The function should return a single number (one for the entire GGM)
or a vector (one for each node). This ensures that the print and <code><a href='plot.roll_your_own.html'>plot.roll_your_own</a></code>
will work.</p>

<p>When <code>select = TRUE</code>, the graph is selected and then the network statistics are computed based on
the weigthed adjacency matrix. This is accomplished internally by multiplying each of the sampled
partial correlation matrices by the adjacency matrix.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='co'>####################################</span>
<span class='co'>###### example 1: assortment #######</span>
<span class='co'>####################################</span>
<span class='co'># assortment</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>assortnet</span>)

<span class='no'>Y</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>BGGMmod</span><span class='kw ns'>::</span><span class='no'><a href='bfi.html'>bfi</a></span>[,<span class='fl'>1</span>:<span class='fl'>10</span>]
<span class='no'>membership</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>"a"</span>, <span class='fl'>5</span>), <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>"c"</span>, <span class='fl'>5</span>))

<span class='co'># fit model</span>
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='estimate.html'>estimate</a></span>(<span class='kw'>Y</span> <span class='kw'>=</span> <span class='no'>Y</span>, <span class='kw'>iter</span> <span class='kw'>=</span> <span class='fl'>250</span>,
                <span class='kw'>progress</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># membership</span>
<span class='no'>membership</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>"a"</span>, <span class='fl'>5</span>), <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>"c"</span>, <span class='fl'>5</span>))

<span class='co'># define function</span>
<span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>,<span class='no'>...</span>){
 <span class='fu'><a href='https://rdrr.io/pkg/assortnet/man/assortment.discrete.html'>assortment.discrete</a></span>(<span class='no'>x</span>, <span class='no'>...</span>)$<span class='no'>r</span>
}


<span class='no'>net_stat</span> <span class='kw'>&lt;-</span> <span class='fu'>roll_your_own</span>(<span class='kw'>object</span> <span class='kw'>=</span> <span class='no'>fit</span>,
                          <span class='kw'>FUN</span> <span class='kw'>=</span> <span class='no'>f</span>,
                          <span class='kw'>types</span> <span class='kw'>=</span> <span class='no'>membership</span>,
                          <span class='kw'>weighted</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                          <span class='kw'>SE</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>M</span> <span class='kw'>=</span> <span class='fl'>1</span>,
                          <span class='kw'>progress</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># print</span>
<span class='no'>net_stat</span></div><div class='output co'>#&gt; BGGMmod: Bayesian Gaussian Graphical Models 
#&gt; --- 
#&gt; Network Stats: Roll Your Own
#&gt; Posterior Samples: 250 
#&gt; --- 
#&gt; Estimates: 
#&gt; 
#&gt;  Post.mean Post.sd Cred.lb Cred.ub
#&gt;      0.351   0.109    0.15   0.547
#&gt; --- </div><div class='input'>

<span class='co'>############################################</span>
<span class='co'>###### example 2: expected influence #######</span>
<span class='co'>############################################</span>
<span class='co'># expected influence from this package</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>networktools</span>)</div><div class='output co'>#&gt; <span class='message'>Registered S3 methods overwritten by 'car':</span>
#&gt; <span class='message'>  method                          from</span>
#&gt; <span class='message'>  influence.merMod                lme4</span>
#&gt; <span class='message'>  cooks.distance.influence.merMod lme4</span>
#&gt; <span class='message'>  dfbeta.influence.merMod         lme4</span>
#&gt; <span class='message'>  dfbetas.influence.merMod        lme4</span></div><div class='input'>
<span class='co'># data</span>
<span class='no'>Y</span> <span class='kw'>&lt;-</span> <span class='no'>depression</span>

<span class='co'># fit model</span>
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='estimate.html'>estimate</a></span>(<span class='kw'>Y</span> <span class='kw'>=</span> <span class='no'>Y</span>, <span class='kw'>iter</span> <span class='kw'>=</span> <span class='fl'>250</span>)</div><div class='output co'>#&gt; <span class='message'>BGGMmod: Posterior Sampling </span></div><div class='output co'>#&gt; <span class='message'>BGGMmod: Finished</span></div><div class='input'>
<span class='co'># define function</span>
<span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>,<span class='no'>...</span>){
     <span class='fu'><a href='https://rdrr.io/pkg/networktools/man/expectedInf.html'>expectedInf</a></span>(<span class='no'>x</span>,<span class='no'>...</span>)$<span class='no'>step1</span>
}

<span class='co'># compute</span>
<span class='no'>net_stat</span> <span class='kw'>&lt;-</span> <span class='fu'>roll_your_own</span>(<span class='kw'>object</span> <span class='kw'>=</span> <span class='no'>fit</span>,
                          <span class='kw'>FUN</span> <span class='kw'>=</span> <span class='no'>f</span>,
                          <span class='kw'>progress</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'>#######################################</span>
<span class='co'>### example 3: mixed data &amp; bridge ####</span>
<span class='co'>#######################################</span>
<span class='co'># bridge from this package</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>networktools</span>)

<span class='co'># data</span>
<span class='no'>Y</span> <span class='kw'>&lt;-</span> <span class='no'>ptsd</span>[,<span class='fl'>1</span>:<span class='fl'>7</span>]

<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='estimate.html'>estimate</a></span>(<span class='no'>Y</span>,
                <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"mixed"</span>,
                <span class='kw'>iter</span> <span class='kw'>=</span> <span class='fl'>250</span>)</div><div class='output co'>#&gt; <span class='message'>BGGMmod: Posterior Sampling </span></div><div class='output co'>#&gt; <span class='message'>BGGMmod: Finished</span></div><div class='input'>
<span class='co'># clusters</span>
<span class='no'>communities</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/substr.html'>substring</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span>(<span class='no'>Y</span>), <span class='fl'>1</span>, <span class='fl'>1</span>)

<span class='co'># function is slow</span>
<span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>...</span>){
 <span class='fu'><a href='https://rdrr.io/pkg/networktools/man/bridge.html'>bridge</a></span>(<span class='no'>x</span>, <span class='no'>...</span>)$<span class='no'>`Bridge Strength`</span>
}

<span class='no'>net_stat</span> <span class='kw'>&lt;-</span> <span class='fu'>roll_your_own</span>(<span class='no'>fit</span>,
                          <span class='kw'>FUN</span> <span class='kw'>=</span> <span class='no'>f</span>,
                          <span class='kw'>select</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                          <span class='kw'>communities</span> <span class='kw'>=</span> <span class='no'>communities</span>,
                          <span class='kw'>progress</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># }</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Donald Williams, Joris Mulder.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


